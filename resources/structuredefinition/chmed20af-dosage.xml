<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="chmed20af-dosage"/>
  <url value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-dosage"/>
  <version value="0.1.0"/>
  <name value="DosageChmed20af"/>
  <title value="Dosage for CHMED20AF"/>
  <status value="draft"/>
  <publisher value="IG eMediplan"/>
  <contact>
    <telecom>
      <system value="url"/>
      <value value="http://www.emediplan.ch"/>
    </telecom>
  </contact>
  <description value="A prescription can be structured in a bundle according to the prescription bundle profile."/>
  <fhirVersion value="4.0.1"/>
  <mapping>
    <identity value="CHMED16A"/>
    <uri value="http://emediplan.ch/chmed16a"/>
    <name value="Mapping to CHMED16A"/>
  </mapping>
  <kind value="complex-type"/>
  <abstract value="false"/>
  <type value="Dosage"/>
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Dosage"/>
  <derivation value="constraint"/>
  <differential>
    <element id="Dosage">
      <path value="Dosage"/>
      <short value="How the medication is/was taken or should be taken"/>
      <definition value="Indicates how the medication is/was taken or should be taken by the patient."/>
      <min value="0"/>
      <max value="*"/>
    </element>
    <element id="Dosage.sequence">
      <path value="Dosage.sequence"/>
      <short value="The order of the dosage instructions"/>
      <definition value="Indicates the order in which the dosage instructions should be applied or interpreted."/>
      <min value="0"/>
      <max value="1"/>
    </element>
    <element id="Dosage.text">
      <path value="Dosage.text"/>
      <short value="Free text dosage instructions e.g. SIG"/>
      <definition value="Free text dosage instructions e.g. SIG."/>
      <min value="0"/>
      <max value="0"/>
      <mapping>
        <identity value="rim"/>
        <map value=".text"/>
      </mapping>
    </element>
    <element id="Dosage.additionalInstruction">
      <path value="Dosage.additionalInstruction"/>
      <short value="Supplemental instruction - e.g. &quot;with meals&quot;"/>
      <definition value="Supplemental instruction - e.g. &quot;with meals&quot;."/>
      <min value="0"/>
      <max value="0"/>
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="AdditionalInstruction"/>
        </extension>
        <strength value="example"/>
        <description value="A coded concept identifying additional instructions such as &quot;take with water&quot; or &quot;avoid operating heavy machinery&quot;."/>
        <valueSet value="http://hl7.org/fhir/ValueSet/additional-instruction-codes"/>
      </binding>
    </element>
    <element id="Dosage.patientInstruction">
      <path value="Dosage.patientInstruction"/>
      <short value="Patient or consumer oriented instructions"/>
      <definition value="Instructions in terms that are understood by the patient or consumer."/>
      <min value="0"/>
      <max value="0"/>
    </element>
    <element id="Dosage.timing">
      <path value="Dosage.timing"/>
      <short value="When medication should be administered"/>
      <definition value="When medication should be administered."/>
      <min value="0"/>
      <max value="1"/>
      <mapping>
        <identity value="CHMED16A"/>
        <map value="Posology.DtFrom, Posology.DtTo, CyDu, InRes, SimpliedVersion of taking times onlys"/>
      </mapping>
    </element>
    <element id="Dosage.asNeeded[x]">
      <path value="Dosage.asNeeded[x]"/>
      <short value="Take &quot;as needed&quot; (for x)"/>
      <definition value="Indicates whether the Medication is only taken when needed within a specific dosing schedule (Boolean option), or it indicates the precondition for taking the Medication (CodeableConcept)."/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="boolean"/>
      </type>
      <type>
        <code value="CodeableConcept"/>
      </type>
    </element>
    <element id="Dosage.site">
      <path value="Dosage.site"/>
      <short value="Body site to administer to"/>
      <definition value="Body site to administer to."/>
      <min value="0"/>
      <max value="0"/>
    </element>
    <element id="Dosage.route">
      <path value="Dosage.route"/>
      <short value="How drug should enter body"/>
      <definition value="How drug should enter body."/>
      <min value="0"/>
      <max value="1"/>
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="RouteOfRequest"/>
        </extension>
        <strength value="required"/>
        <description value="A coded concept describing the route or physiological path of administration of a therapeutic agent into or onto the body of a subject."/>
        <valueSet value="http://chmed20af.emediplan.ch/fhir/ValueSet/chmed20af-valueset-cdtyp26"/>
      </binding>
      <mapping>
        <identity value="CHMED16A"/>
        <map value="Medication.Roa"/>
      </mapping>
    </element>
    <element id="Dosage.method">
      <path value="Dosage.method"/>
      <short value="Technique for administering medication"/>
      <definition value="Technique for administering medication."/>
      <min value="0"/>
      <max value="0"/>
    </element>
    <element id="Dosage.doseAndRate">
      <path value="Dosage.doseAndRate"/>
      <short value="Amount of medication administered"/>
      <definition value="The amount of medication administered."/>
      <min value="0"/>
      <max value="1"/>
    </element>
    <element id="Dosage.doseAndRate.dose[x]">
      <path value="Dosage.doseAndRate.dose[x]"/>
      <short value="Amount of medication per dose"/>
      <definition value="Amount of medication per dose."/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="Range"/>
      </type>
      <type>
        <code value="Quantity"/>
        <profile value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-simplequantity"/>
      </type>
      <mapping>
        <identity value="CHMED16A"/>
        <map value="doseSimpleQuantity: TakingTime.A, doseRange: TakingTime.DoFrom, TakingTime.doTo"/>
      </mapping>
    </element>
    <element id="Dosage.doseAndRate.rate[x]">
      <path value="Dosage.doseAndRate.rate[x]"/>
      <short value="Amount of medication per unit of time"/>
      <definition value="Amount of medication per unit of time."/>
      <min value="0"/>
      <max value="0"/>
    </element>
    <element id="Dosage.maxDosePerPeriod">
      <path value="Dosage.maxDosePerPeriod"/>
      <short value="Upper limit on medication per unit of time"/>
      <definition value="Upper limit on medication per unit of time."/>
      <min value="0"/>
      <max value="1"/>
      <mapping>
        <identity value="CHMED16A"/>
        <map value="TakingTime.MA"/>
      </mapping>
    </element>
    <element id="Dosage.maxDosePerAdministration">
      <path value="Dosage.maxDosePerAdministration"/>
      <short value="Upper limit on medication per administration"/>
      <definition value="Upper limit on medication per administration."/>
      <min value="0"/>
      <max value="0"/>
    </element>
    <element id="Dosage.maxDosePerLifetime">
      <path value="Dosage.maxDosePerLifetime"/>
      <short value="Upper limit on medication per lifetime of the patient"/>
      <definition value="Upper limit on medication per lifetime of the patient."/>
      <min value="0"/>
      <max value="0"/>
    </element>
  </differential>
</StructureDefinition>