<StructureDefinition xmlns="http://hl7.org/fhir">
	<id value="chmed20af-mp-composition"/>
	<meta>
		<lastUpdated value="2017-05-26T13:58:37.090+02:00"/>
	</meta>
	<url value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-mp-composition"/>
	<version value="0.1.0"/>
	<name value="CompositionMedicationPlan"/>
	<title value="Composition MedicationPlan"/>
	<status value="draft"/>
	<publisher value="IG eMediplan"/>
	<contact>
		<telecom>
			<system value="url"/>
			<value value="http://www.emediplan.ch"/>
		</telecom>
	</contact>
	<description value="Profile for the Composition Resource of the medication plan."/>
	<fhirVersion value="4.0.1"/>
	<mapping>
		<identity value="CHMED16A"/>
		<uri value="http://emediplan.ch/chmed16a"/>
		<name value="Mapping to CHMED16A"/>
	</mapping>
	<kind value="resource"/>
	<abstract value="false"/>
	<type value="Composition"/>
	<baseDefinition value="http://fhir.ch/ig/ch-emed/StructureDefinition/ch-emed-composition-medicationcard"/>
	<derivation value="constraint"/>
	<differential>
		<element id="Composition">
			<path value="Composition"/>
			<min value="1"/>
			<max value="1"/>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="Medication"/>
			</mapping>
		</element>
		<element id="Composition.extension">
			<path value="Composition.extension"/>
			<slicing>
				<discriminator>
					<type value="value"/>
					<path value="url"/>
				</discriminator>
				<rules value="open"/>
			</slicing>
		</element>
		<element id="Composition.extension:informationRecipient">
			<path value="Composition.extension"/>
			<sliceName value="informationRecipient"/>
			<short value="A recipient of this document (person or organization)"/>
			<max value="1"/>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="Patient or Patient.RCV (GLN of receiver)"/>
			</mapping>
		</element>
		<element id="Composition.extension:privatefield">
			<path value="Composition.extension" />
			<sliceName value="privatefield" />
			<short value="Private fields for patient"/>
			<min value="0"/>
			<max value="*"/>
			<type>
				<code value="Extension" />
				<profile value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-privatefield" />
			</type>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="Private Fields"/>
			</mapping>
		</element>
		<element id="Composition.identifier">
			<path value="Composition.identifier"/>
			<short value="Logical identifier for document (GUID)"/>
			<definition value="Logical identifier for document (GUID)"/>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="id"/>
			</mapping>
		</element>
		<element id="Composition.status">
			<path value="Composition.status"/>
			<fixedCode value="final"/>
		</element>
		<element id="Composition.type">
			<path value="Composition.type"/>
			<short value="Document type"/>
			<patternCodeableConcept>
				<coding>
					<system value="http://snomed.info/sct"/>
					<code value="721912009"/>
					<display value="Medication summary document (record artifact)"/>
				</coding>
			</patternCodeableConcept>
		</element>
		<element id="Composition.subject">
			<path value="Composition.subject"/>
			<short value="Reference to the Patient"/>
			<definition value="Reference to the Patient."/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-mp-patient"/>
			</type>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="Patient"/>
			</mapping>
		</element>
		<element id="Composition.encounter">
			<path value="Composition.encounter"/>
			<max value="0"/>
		</element>
		<element id="Composition.date">
			<path value="Composition.date"/>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="DT"/>
			</mapping>
		</element>
		<element id="Composition.author">
			<path value="Composition.author"/>
			<short value="Author"/>
			<definition value="Author"/>
			<max value="1"/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-practitioner"/>
			</type>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="Auth"/>
			</mapping>
		</element>
		<element id="Composition.confidentiality">
			<path value="Composition.confidentiality"/>
		</element>
		<element id="Composition.attester">
			<path value="Composition.attester"/>
			<slicing>
				<discriminator>
					<type value="value" />
					<path value="mode" />
				</discriminator>
				<rules value="open" />
			</slicing>
			<max value="1"/>
		</element>
		<element id="Composition.attester:legalAuthenticator">
			<path value="Composition.attester"/>
			<sliceName value="legalAuthenticator"/>
			<min value="0"/>
			<max value="1"/>
		</element>
		<element id="Composition.attester.time">
			<path value="Composition.attester.time"/>
			<short value="Validate date: Date of validation"/>
			<definition value="When composition was attested by the party, Validate date: Date of validation"/>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="ValDt (Validate date: Date of validation)"/>
			</mapping>
		</element>
		<element id="Composition.attester.party">
			<path value="Composition.attester.party"/>
			<definition value="Validated by: The Gln of the pharmacist who has validated the medication plan"/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-practitioner"/>
			</type>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="ValBy (Validate by : The Gln of the pharmacist who has validated the medication plan)"/>
			</mapping>
		</element>
		<element id="Composition.custodian">
			<path value="Composition.custodian"/>
			<comment value="This is useful when documents are derived from a composition - provides guidance for how to get the latest version of the document. This is optional because this is sometimes not known by the authoring system, and can be inferred by context. However it is important that this information be known when working with a derived document, so providing a custodian is encouraged."/>
		</element>
		<element id="Composition.relatesTo">
			<path value="Composition.relatesTo"/>
			<max value="0"/>
			<constraint>
				<key value="ele-1"/>
				<severity value="error"/>
				<human value="All FHIR elements must have a @value or children"/>
				<expression value="children().count() > id.count()"/>
				<xpath value="@value|f:*|h:div"/>
				<source value="Element"/>
			</constraint>
		</element>
		<element id="Composition.event">
			<path value="Composition.event"/>
			<max value="0"/>
			<constraint>
				<key value="ele-1"/>
				<severity value="error"/>
				<human value="All FHIR elements must have a @value or children"/>
				<expression value="children().count() > id.count()"/>
				<xpath value="@value|f:*|h:div"/>
				<source value="Element"/>
			</constraint>
		</element>
		<element id="Composition.section">
			<path value="Composition.section"/>
			<slicing>
				<discriminator>
					<type value="pattern"/>
					<path value="code"/>
				</discriminator>
				<ordered value="false"/>
				<rules value="open"/>
			</slicing>
			<min value="1"/>
			<max value="3"/>
		</element>

		<!-- Section card -->
		<element id="Composition.section:card">
			<path value="Composition.section"/>
			<sliceName value="card"/>
			<min value="1"/>
			<max value="1"/>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="Medication.Medicaments"/>
			</mapping>
		</element>
		<element id="Composition.section.code:card">
			<path value="Composition.section.code"/>
			<min value="1"/>
			<patternCodeableConcept>
				<coding>
					<system value="http://loinc.org"/>
					<code value="10160-0"/>
					<display value="History of medication use"/>
				</coding>
			</patternCodeableConcept>
		</element>
		<element id="Composition.section.entry:card">
			<path value="Composition.section.entry"/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-mp-medicationstatement"/>
			</type>
		</element>
		<element id="Composition.section.section:card">
			<path value="Composition.section.section"/>
			<min value="0"/>
			<max value="0"/>
		</element>

		<!-- Section annotation-->
		<element id="Composition.section:annotation">
			<path value="Composition.section"/>
			<sliceName value="annotation"/>
			<max value="1"/>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="Medication.Rmk"/>
			</mapping>
		</element>
		<element id="Composition.section.code:annotation">
			<path value="Composition.section.code"/>
			<min value="1"/>
			<patternCodeableConcept>
				<coding>
					<system value="http://loinc.org"/>
					<code value="48767-8"/>
					<display value="Annotation comment"/>
				</coding>
			</patternCodeableConcept>
		</element>
		<element id="Composition.section.section:annotation">
			<path value="Composition.section.section"/>
			<min value="0"/>
			<max value="0"/>
		</element>

		<!-- Section healthconcerns -->
		<element id="Composition.section:healthconcerns">
			<path value="Composition.section"/>
			<sliceName value="healthconcerns"/>
			<max value="1"/>
		</element>
		<element id="Composition.section.code:healthconcerns">
			<path value="Composition.section.code"/>
			<min value="1"/>
			<patternCodeableConcept>
				<coding>
					<system value="http://loinc.org"/>
					<code value="75310-3"/>
					<display value="Health Concerns"/>
				</coding>
			</patternCodeableConcept>
		</element>
		<element id="Composition.section.entry">
			<path value="Composition.section.entry"/>
			<slicing>
				<discriminator>
					<type value="profile"/>
					<path value="resolve()"/>
				</discriminator>
				<ordered value="false"/>
				<rules value="open"/>
			</slicing>
		</element>
		<element id="Composition.section.entry:bodyweight">
			<path value="Composition.section.entry"/>
			<sliceName value="bodyweight"/>
			<short value="Body Weight (kg)"/>
			<definition value="Body Weight (kg)"/>
			<max value="1"/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://hl7.org/fhir/StructureDefinition/bodyweight"/>
			</type>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="MedicalData.Meas.Weight"/>
			</mapping>
		</element>
		<element id="Composition.section.entry:bodyheight">
			<path value="Composition.section.entry"/>
			<sliceName value="bodyheight"/>
			<short value="Body height (cm)"/>
			<definition value="Body height (cm)"/>
			<max value="1"/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://hl7.org/fhir/StructureDefinition/bodyheight"/>
			</type>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="MedicalData.Meas.Height"/>
			</mapping>
		</element>
		<element id="Composition.section.entry:dlstmen">
			<path value="Composition.section.entry"/>
			<sliceName value="dlstmen"/>
			<short value="First day of last menstruation"/>
			<definition value="First day of last menstruation, Only if risks Id 74,75,76 in risk group 3"/>
			<max value="1"/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-obs-dateoflastmenstruation"/>
			</type>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="MedicalData.DLstMen"/>
			</mapping>
		</element>
		<element id="Composition.section.entry:prematurebaby">
			<path value="Composition.section.entry"/>
			<sliceName value="prematurebaby"/>
			<short value="Premature Baby"/>
			<definition value="Premature Baby if age &lt;=18 months"/>
			<max value="1"/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-obs-prematurebaby"/>
			</type>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="MedicalData.Prem"/>
			</mapping>
		</element>
		<element id="Composition.section.entry:timeofgestation">
			<path value="Composition.section.entry"/>
			<sliceName value="timeofgestation"/>
			<short value="Time of gestation"/>
			<definition value="Time of Gestation weeks-day"/>
			<max value="1"/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-obs-timeofgestation"/>
			</type>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="MedicalData.ToG"/>
			</mapping>
		</element>
		<element id="Composition.section.entry:risks">
			<path value="Composition.section.entry"/>
			<sliceName value="risks"/>
			<short value="Risks"/>
			<definition value="Possible risks for a patient"/>
			<max value="6"/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://chmed20af.emediplan.ch/fhir/StructureDefinition/chmed20af-condition-risks"/>
			</type>
			<mapping>
				<identity value="CHMED16A"/>
				<map value="MedicalData.RG"/>
			</mapping>
		</element>
		<element id="Composition.section.section:healthconcerns">
			<path value="Composition.section.section"/>
			<min value="0"/>
			<max value="0"/>
		</element>
	</differential>
</StructureDefinition>